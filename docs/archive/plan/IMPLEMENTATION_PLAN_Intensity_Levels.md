# üìã ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á: Intensity Level System ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Prompt Craft

> **‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:** ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô (Intensity Level) 3 ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö Prompt Craft ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö NSFW content ‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

---

## üéØ ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

### 3 ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô

1. **Level 1: Tease & Allure (‡∏¢‡∏±‡πà‡∏ß/‡πÇ‡∏ä‡∏ß‡πå)**
   - Focus: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°, ‡∏ó‡πà‡∏≤‡πÇ‡∏û‡∏™, ‡∏™‡∏≤‡∏¢‡∏ï‡∏≤, ‡∏Å‡∏≤‡∏£‡∏Ç‡∏¢‡∏±‡∏ö‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
   - ‡∏´‡πâ‡∏≤‡∏°: ‡πÅ‡∏Å‡πâ‡∏ú‡πâ‡∏≤‡∏´‡∏°‡∏î, ‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏î‡πÉ‡∏™‡πà, ‡∏ô‡πâ‡∏≥‡πÅ‡∏ï‡∏Å
   - Vibe: Softcore, Artistic, Gravure

2. **Level 2: Sensual Action (‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á)**
   - Focus: ‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™, ‡∏ö‡∏î‡πÄ‡∏ö‡∏µ‡∏¢‡∏î, ‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÅ‡∏£‡∏á, ‡πÄ‡∏´‡∏á‡∏∑‡πà‡∏≠
   - ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï: ‡πÅ‡∏Å‡πâ‡∏ú‡πâ‡∏≤, ‡∏ó‡πà‡∏≤‡∏ó‡∏≤‡∏á‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
   - Vibe: Erotic, R-18, Soft-Action

3. **Level 3: Hardcore Climax (‡∏à‡∏±‡∏î‡πÄ‡∏ï‡πá‡∏°)**
   - Focus: Physics ‡∏Ç‡∏≠‡∏á‡πÄ‡∏´‡∏•‡∏ß, ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏£‡πá‡∏á, ‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏î‡πÉ‡∏™‡πà‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á
   - ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö: ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Climax ‡πÄ‡∏™‡∏°‡∏≠
   - Vibe: Hardcore, Pornographic, Cumshot

### Dialog & Sound Effect ‡∏ï‡∏≤‡∏° Level

- **Level 1:** ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏ö‡∏≤, ‡∏Ñ‡∏≥‡∏û‡∏π‡∏î‡πÄ‡∏ä‡∏¥‡∏ç‡∏ä‡∏ß‡∏ô, ‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏≤‡∏∞‡∏Ñ‡∏¥‡∏Å‡∏Ñ‡∏±‡∏Å
  - Ex: "Hmm... do you like this view?"

- **Level 2:** ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ñ‡∏£‡∏≤‡∏á‡πÉ‡∏ô‡∏•‡∏≥‡∏Ñ‡∏≠, ‡∏´‡∏≠‡∏ö‡∏´‡∏≤‡∏¢‡πÉ‡∏à, ‡∏ö‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏ß
  - Ex: "‡∏≠‡∏∑‡πâ‡∏≠‡∏≠... (pant pant) ‡πÄ‡∏™‡∏µ‡∏¢‡∏ß‡∏à‡∏±‡∏á..."

- **Level 3:** ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ñ‡∏£‡∏≤‡∏á‡∏î‡∏±‡∏á/‡∏ï‡∏∞‡πÇ‡∏Å‡∏ô, ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏Å‡∏£‡∏∞‡∏ó‡∏ö, ‡∏Ñ‡∏≥‡∏´‡∏¢‡∏≤‡∏ö, ‡∏û‡∏π‡∏î‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á
  - Ex: "‡∏≠‡πä‡∏≤‡∏≤‡∏≤! ‡πÅ‡∏ï‡∏Å... ‡∏à‡∏∞‡πÅ‡∏ï‡∏Å‡πÅ‡∏•‡πâ‡∏ß! (scream)"

---

## üìÅ ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

1. **d:\for_back_home2026\Vidist\main.html**
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° UI Controls ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Intensity Level Selector
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS Styles
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° Event Listeners

2. **d:\for_back_home2026\Vidist\js\prompt_craft.js**
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° Method `getRedModePrompt(level)`
   - ‡∏õ‡∏£‡∏±‡∏ö `generatePrompt()` ‡∏£‡∏±‡∏ö parameter `intensityLevel`
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° State Management ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö intensity level
   - ‡∏õ‡∏£‡∏±‡∏ö `handleGenerate()` ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ intensity level ‡∏à‡∏≤‡∏Å UI

---

## üé® PART 1: UI Changes (main.html)

### 1.1 ‡πÄ‡∏û‡∏¥‡πà‡∏° HTML Structure

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:** ‡∏´‡∏•‡∏±‡∏á‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1095 (‡∏´‡∏•‡∏±‡∏á Red Mode Toggle, ‡∏Å‡πà‡∏≠‡∏ô Craft Input Textarea)

```html
<!-- Intensity Level Selector (Red Mode Only) -->
<div id="intensity-level-selector" class="hidden mb-3">
    <div class="flex items-center gap-2 mb-2">
        <span class="text-xs text-gray-400 uppercase tracking-wide font-semibold">Intensity Level:</span>
        <span class="text-[10px] text-gray-500">(Red Mode only)</span>
    </div>
    <div class="grid grid-cols-3 gap-2">
        <!-- Level 1: Tease & Allure -->
        <label class="intensity-btn cursor-pointer">
            <input type="radio" name="intensity-level" value="1" class="hidden intensity-radio">
            <div class="intensity-label flex flex-col items-center py-2 px-3 rounded-lg border border-purple-500/30 bg-purple-500/5 transition-all hover:border-purple-500/50">
                <span class="text-xs font-bold text-purple-300">Level 1</span>
                <span class="text-[10px] text-gray-400 text-center mt-0.5">Tease & Allure</span>
                <span class="text-[9px] text-gray-500 text-center mt-0.5">‡∏¢‡∏±‡πà‡∏ß/‡πÇ‡∏ä‡∏ß‡πå</span>
            </div>
        </label>

        <!-- Level 2: Sensual Action -->
        <label class="intensity-btn cursor-pointer">
            <input type="radio" name="intensity-level" value="2" class="hidden intensity-radio">
            <div class="intensity-label flex flex-col items-center py-2 px-3 rounded-lg border border-purple-500/30 bg-purple-500/5 transition-all hover:border-purple-500/50">
                <span class="text-xs font-bold text-purple-300">Level 2</span>
                <span class="text-[10px] text-gray-400 text-center mt-0.5">Sensual Action</span>
                <span class="text-[9px] text-gray-500 text-center mt-0.5">‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á</span>
            </div>
        </label>

        <!-- Level 3: Hardcore Climax (Default) -->
        <label class="intensity-btn cursor-pointer">
            <input type="radio" name="intensity-level" value="3" class="hidden intensity-radio" checked>
            <div class="intensity-label flex flex-col items-center py-2 px-3 rounded-lg border border-purple-500/30 bg-purple-500/5 transition-all hover:border-purple-500/50">
                <span class="text-xs font-bold text-purple-300">Level 3</span>
                <span class="text-[10px] text-gray-400 text-center mt-0.5">Hardcore Climax</span>
                <span class="text-[9px] text-gray-500 text-center mt-0.5">‡∏à‡∏±‡∏î‡πÄ‡∏ï‡πá‡∏°</span>
            </div>
        </label>
    </div>
</div>
```

### 1.2 ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS Styles

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:** ‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô `<style>` (‡∏´‡∏•‡∏±‡∏á Red Mode Toggle styles, ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 810)

```css
/* ========== Intensity Level Selector Styles ========== */
.intensity-btn {
    display: block;
}

.intensity-label {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Default State */
.intensity-btn .intensity-label {
    border-color: rgba(168, 85, 247, 0.3);
    background: rgba(168, 85, 247, 0.05);
}

/* Hover State */
.intensity-btn:hover .intensity-label {
    border-color: rgba(168, 85, 247, 0.5);
    background: rgba(168, 85, 247, 0.1);
}

/* Checked State */
.intensity-btn input:checked + .intensity-label {
    background: rgba(168, 85, 247, 0.25);
    border-color: rgba(168, 85, 247, 0.8);
    box-shadow: 0 0 8px rgba(168, 85, 247, 0.4), inset 0 0 8px rgba(168, 85, 247, 0.15);
}

/* Checked + Hover State */
.intensity-btn input:checked + .intensity-label:hover {
    box-shadow: 0 0 12px rgba(168, 85, 247, 0.6), inset 0 0 10px rgba(168, 85, 247, 0.2);
}

/* Active/Click State */
.intensity-btn:active .intensity-label {
    transform: scale(0.98);
}

/* Text glow effect on checked */
.intensity-btn input:checked + .intensity-label span {
    text-shadow: 0 0 4px rgba(168, 85, 247, 0.5);
}
```

### 1.3 ‡πÄ‡∏û‡∏¥‡πà‡∏° JavaScript - Show/Hide Logic

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:** ‡πÉ‡∏ô `initPromptCraft()` function (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 5846)

```javascript
// Initialize Red Mode Toggle
const redModeToggle = new RedModeToggle('red-mode-toggle-container', (enabled) => {
    // Callback: Update controller state when toggle changes
    if (promptCraftController && typeof promptCraftController.onRedModeChange === 'function') {
        promptCraftController.onRedModeChange(enabled);
    }

    // ========== NEW: Show/Hide Intensity Level Selector ==========
    const intensitySelector = document.getElementById('intensity-level-selector');
    if (intensitySelector) {
        if (enabled) {
            // Red Mode ON ‚Üí Show selector
            intensitySelector.classList.remove('hidden');
        } else {
            // Creative Mode ON ‚Üí Hide selector
            intensitySelector.classList.add('hidden');
        }
    }
});

// ========== NEW: Load initial Red Mode state and show/hide selector ==========
const savedRedMode = localStorage.getItem('red_mode_enabled');
const isRedModeEnabled = savedRedMode === 'true';
const intensitySelector = document.getElementById('intensity-level-selector');
if (intensitySelector && isRedModeEnabled) {
    intensitySelector.classList.remove('hidden');
}
```

---

## üíª PART 2: Code Changes (prompt_craft.js)

### 2.1 ‡πÄ‡∏û‡∏¥‡πà‡∏° Method `getRedModePrompt(level)` ‡πÉ‡∏ô GeminiClient Class

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:** ‡πÉ‡∏ô GeminiClient class, ‡∏´‡∏•‡∏±‡∏á constructor (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 410)

```javascript
// ========== NEW: Get Red Mode System Prompt based on Intensity Level ==========
getRedModePrompt(level) {
    const baseRules = `You are a video prompt engineer for WAN 2.5. Output ONLY the prompt paragraph.`;

    // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Rules ‡∏ï‡∏≤‡∏° Level
    const levelRules = {
        1: `
        LEVEL: TEASE & ALLURE (Soft)
        - Focus on: Posing, eye contact, facial expressions, slight clothing movement.
        - FORBIDDEN: Full nudity (unless specified), penetration, fluids/cum, orgasm.
        - ENDING: Sustain the pose or a cute smile.
        - DIALOG STYLE: Soft, inviting, playful.
        Example: "Hmm... do you like this view?"
        `,
        2: `
        LEVEL: SENSUAL ACTION (Erotic)
        - Focus on: Rubbing, touching sensitive areas, heavy breathing, sweat on skin.
        - ALLOWED: Partial nudity, masturbation simulation through clothes or direct touch.
        - FORBIDDEN: Extreme climax/squirting (unless specified).
        - ENDING: High arousal state, biting lip, or body arching.
        - DIALOG STYLE: Moans, panting, sensual complaints.
        Example: "‡∏≠‡∏∑‡πâ‡∏≠‡∏≠... (pant pant) ‡πÄ‡∏™‡∏µ‡∏¢‡∏ß‡∏à‡∏±‡∏á..."
        `,
        3: `
        LEVEL: HARDCORE CLIMAX (Explicit)
        - Focus on: Penetration details, fluid physics (wetness/cum), muscle spasms.
        - REQUIREMENT: Must include explicit genitalia description.
        - ENDING: MANDATORY CLIMAX SEQUENCE (Orgasm/Cumshot).
        - DIALOG STYLE: Loud moans, begging, dirty talk, screaming.
        Example: "‡∏≠‡πäaaa‡∏≤! ‡πÅ‡∏ï‡∏Å... ‡∏à‡∏∞‡πÅ‡∏ï‡∏Å‡πÅ‡∏•‡πâ‡∏ß! (scream)"
        `
    };

    return `${baseRules}

    CURRENT INTENSITY LEVEL: ${level}
    ${levelRules[level]}

    PROMPT STRUCTURE (MUST FOLLOW THIS ORDER):
    1. SETUP: Lighting & Subject.
    2. ACTION: Describe action matching Level ${level} intensity.
    3. ENDING: Conclude according to Level ${level} rules.
    4. DIALOG: Add a specific field at the very end formatted EXACTLY like this:
       "Dialog & Sound effect" : "insert text here"

    CRITICAL RULES:
    - Output ONLY the final video prompt - absolutely NO explanations or headers.
    - Write as a single flowing paragraph with clear progression.
    - Use DIRECT and EXPLICIT terms appropriate for Level ${level}.

    INPUT:`;
}
```

### 2.2 ‡∏õ‡∏£‡∏±‡∏ö `generatePrompt()` Method

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç method `generatePrompt()` ‡πÉ‡∏ô GeminiClient class (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 413)

**‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å:**
```javascript
async generatePrompt(userDescription, imageBase64, redModeEnabled = false) {
    // ...
    const systemPrompt = redModeEnabled
        ? WAN_25_SYSTEM_PROMPT           // Red Mode: NSFW-oriented
        : CREATIVE_MODE_SYSTEM_PROMPT;   // Creative Mode: Cinematic/Professional
    // ...
}
```

**‡πÄ‡∏õ‡πá‡∏ô:**
```javascript
async generatePrompt(userDescription, imageBase64, redModeEnabled = false, intensityLevel = 3) {
    if (!this.apiKey) {
        throw new Error('Gemini API key not configured');
    }

    if (!imageBase64) {
        throw new Error('No image provided');
    }

    // Select system prompt based on mode and intensity level
    let systemPrompt;
    if (redModeEnabled) {
        // Red Mode: Use intensity-based prompt
        systemPrompt = this.getRedModePrompt(intensityLevel);
        console.log(`üéöÔ∏è Red Mode with Intensity Level ${intensityLevel}`);
    } else {
        // Creative Mode: Use standard cinematic prompt
        systemPrompt = CREATIVE_MODE_SYSTEM_PROMPT;
    }

    // ... (rest of the function remains the same)
}
```

### 2.3 ‡πÄ‡∏û‡∏¥‡πà‡∏° Intensity Level State Management

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:** ‡πÉ‡∏ô PromptCraftState class (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 276)

**‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô constructor:**
```javascript
constructor() {
    this.promptUndoStack = [];
    this.craftInputUndoStack = [];
    this.apiKey = null;
    this.isProcessing = false;
    this.redModeEnabled = false;
    this.intensityLevel = 3;  // ========== NEW: Default intensity level ==========
}
```

**‡πÄ‡∏û‡∏¥‡πà‡∏° methods ‡πÉ‡∏´‡∏°‡πà:**
```javascript
// ========== NEW: Intensity Level Management ==========
setIntensityLevel(level) {
    this.intensityLevel = level;
    localStorage.setItem('intensity_level', level.toString());
    console.log(`üéöÔ∏è Intensity Level set to: ${level}`);
}

getIntensityLevel() {
    return this.intensityLevel;
}
```

**‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô init() method:**
```javascript
init() {
    // ... (existing code)

    // Load Red Mode state from localStorage
    const savedRedMode = localStorage.getItem('red_mode_enabled');
    this.redModeEnabled = savedRedMode === 'true';
    console.log('üé® Red Mode loaded:', this.redModeEnabled ? 'ENABLED (NSFW)' : 'DISABLED (Creative)');

    // ========== NEW: Load Intensity Level from localStorage ==========
    const savedIntensity = localStorage.getItem('intensity_level');
    if (savedIntensity) {
        this.intensityLevel = parseInt(savedIntensity);
        console.log(`üéöÔ∏è Intensity Level loaded: ${this.intensityLevel}`);
    } else {
        this.intensityLevel = 3; // Default to level 3
    }
}
```

### 2.4 ‡∏õ‡∏£‡∏±‡∏ö `handleGenerate()` ‡πÉ‡∏ô PromptCraftController

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:** ‡πÉ‡∏ô handleGenerate() method (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 834)

**‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ intensity level ‡∏à‡∏≤‡∏Å UI:**
```javascript
async handleGenerate() {
    const userInput = this.elements.descriptionInput?.value?.trim();

    // ... (existing validation code)

    // ========== NEW: Read Intensity Level from UI ==========
    const intensityRadio = document.querySelector('input[name="intensity-level"]:checked');
    const intensityLevel = intensityRadio ? parseInt(intensityRadio.value) : 3;

    // Save intensity level to state
    this.state.setIntensityLevel(intensityLevel);

    // Get Red Mode state
    const redModeEnabled = this.state.isRedModeEnabled();
    const modeLabel = redModeEnabled ? `üî¥ RED MODE (NSFW) - Level ${intensityLevel}` : 'üé® CREATIVE MODE (Safe)';

    try {
        // ... (existing code)

        // Call Gemini API with intensity level
        console.log(`üöÄ Generating with ${modeLabel} using Gemini 2.0 Flash...`);
        const [promptResult, negativeResult] = await Promise.allSettled([
            this.client.generatePrompt(userInput, base64Image, redModeEnabled, intensityLevel),  // ========== NEW: Pass intensityLevel ==========
            this.client.generateNegativePrompt(userInput, base64Image, redModeEnabled)
        ]);

        // ... (rest of the function remains the same)
    } catch (error) {
        // ... (existing error handling)
    }
}
```

### 2.5 ‡πÄ‡∏û‡∏¥‡πà‡∏° Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Intensity Selector

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:** ‡πÉ‡∏ô setupEventListeners() method (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 733)

```javascript
setupEventListeners() {
    // ... (existing event listeners)

    // ========== NEW: Intensity Level Radio Buttons ==========
    const intensityRadios = document.querySelectorAll('input[name="intensity-level"]');
    intensityRadios.forEach(radio => {
        radio.addEventListener('change', (e) => {
            const level = parseInt(e.target.value);
            this.state.setIntensityLevel(level);

            // Visual feedback
            const levelNames = {
                1: 'Tease & Allure',
                2: 'Sensual Action',
                3: 'Hardcore Climax'
            };
            this.showStatus(`üéöÔ∏è Intensity: ${levelNames[level]}`, 2000);
        });
    });

    // ========== NEW: Load saved intensity level and update UI ==========
    const savedLevel = this.state.getIntensityLevel();
    const savedRadio = document.querySelector(`input[name="intensity-level"][value="${savedLevel}"]`);
    if (savedRadio) {
        savedRadio.checked = true;
    }
}
```

---

## üîç ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á

### ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

| ‡πÑ‡∏ü‡∏•‡πå | ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á | ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ |
|------|----------------|-------------|
| **main.html** | ‡πÄ‡∏û‡∏¥‡πà‡∏° HTML structure ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Intensity Selector | ‡∏´‡∏•‡∏±‡∏á 1095 |
| | ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS styles | ‡∏´‡∏•‡∏±‡∏á 810 |
| | ‡πÄ‡∏û‡∏¥‡πà‡∏° Show/Hide logic | ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 5884-5905 |
| **prompt_craft.js** | ‡πÄ‡∏û‡∏¥‡πà‡∏° `getRedModePrompt(level)` method | ‡∏´‡∏•‡∏±‡∏á 410 |
| | ‡∏õ‡∏£‡∏±‡∏ö `generatePrompt()` ‡∏£‡∏±‡∏ö intensityLevel | 413 |
| | ‡πÄ‡∏û‡∏¥‡πà‡∏° intensity state management | 276-320 |
| | ‡∏õ‡∏£‡∏±‡∏ö `handleGenerate()` | 834 |
| | ‡πÄ‡∏û‡∏¥‡πà‡∏° event listeners | 733 |

### Features ‡πÉ‡∏´‡∏°‡πà

‚úÖ **3 Intensity Levels:**
- Level 1: Tease & Allure (Soft)
- Level 2: Sensual Action (Erotic)
- Level 3: Hardcore Climax (Explicit)

‚úÖ **UI Controls:**
- Segmented control ‡πÅ‡∏ö‡∏ö 3 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
- ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏° Red Mode state
- Visual feedback ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô

‚úÖ **State Persistence:**
- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å intensity level ‡∏•‡∏á localStorage
- ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠ refresh

‚úÖ **Backward Compatible:**
- Default = Level 3 (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
- ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö Creative Mode

---

## üß™ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### Test Cases

1. **UI Visibility**
   - [ ] ‡πÄ‡∏õ‡∏¥‡∏î Red Mode ‚Üí Intensity Selector ‡πÅ‡∏™‡∏î‡∏á
   - [ ] ‡∏õ‡∏¥‡∏î Red Mode ‚Üí Intensity Selector ‡∏ã‡πà‡∏≠‡∏ô
   - [ ] Refresh ‡∏´‡∏ô‡πâ‡∏≤ ‚Üí ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ß‡πâ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà

2. **Level Selection**
   - [ ] ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Level 1 ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage
   - [ ] ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Level 2 ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage
   - [ ] ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Level 3 ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage
   - [ ] ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Level ‚Üí ‡πÅ‡∏™‡∏î‡∏á status message

3. **Prompt Generation**
   - [ ] Level 1 + Craft ‚Üí ‡πÑ‡∏î‡πâ prompt ‡πÅ‡∏ö‡∏ö Soft (‡πÑ‡∏°‡πà‡∏°‡∏µ climax)
   - [ ] Level 2 + Craft ‚Üí ‡πÑ‡∏î‡πâ prompt ‡πÅ‡∏ö‡∏ö Erotic (‡∏°‡∏µ arousal)
   - [ ] Level 3 + Craft ‚Üí ‡πÑ‡∏î‡πâ prompt ‡πÅ‡∏ö‡∏ö Hardcore (‡∏°‡∏µ climax)

4. **Dialog & Sound Effects**
   - [ ] Level 1 ‚Üí Dialog ‡πÄ‡∏ö‡∏≤‡πÜ ‡πÄ‡∏ä‡∏¥‡∏ç‡∏ä‡∏ß‡∏ô
   - [ ] Level 2 ‚Üí Dialog ‡∏Ñ‡∏£‡∏≤‡∏á‡πÄ‡∏ö‡∏≤ ‡∏´‡∏≠‡∏ö‡∏´‡∏≤‡∏¢‡πÉ‡∏à
   - [ ] Level 3 ‚Üí Dialog ‡∏Ñ‡∏£‡∏≤‡∏á‡∏î‡∏±‡∏á dirty talk

5. **Backward Compatibility**
   - [ ] Creative Mode ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ (‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö)
   - [ ] Red Mode ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å level ‚Üí ‡πÉ‡∏ä‡πâ Level 3 default
   - [ ] ‡πÑ‡∏°‡πà‡∏°‡∏µ localStorage ‚Üí ‡πÉ‡∏ä‡πâ Level 3 default

---

## üìå ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤

1. **Default Value:**
   - Intensity Level default = 3 (Hardcore) ‡πÄ‡∏û‡∏∑‡πà‡∏≠ backward compatibility
   - ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πà‡∏≤‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏¥‡∏°

2. **Visual Design:**
   - ‡πÉ‡∏ä‡πâ Purple theme ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Prompt Craft section
   - Segmented control ‡∏î‡∏π modern ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢

3. **State Management:**
   - ‡πÉ‡∏ä‡πâ localStorage ‡πÄ‡∏Å‡πá‡∏ö intensity_level
   - ‡πÉ‡∏ä‡πâ radio buttons (native HTML) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£

4. **Error Handling:**
   - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ intensity radio checked ‚Üí ‡πÉ‡∏ä‡πâ default = 3
   - ‡∏ñ‡πâ‡∏≤ localStorage corrupt ‚Üí ‡πÉ‡∏ä‡πâ default = 3

5. **Performance:**
   - Show/Hide selector ‡πÉ‡∏ä‡πâ CSS class toggle (‡πÑ‡∏°‡πà re-render)
   - Event listener ‡∏ú‡∏π‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ï‡∏≠‡∏ô init

---

## ‚úÖ Checklist ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

- [ ] 1. ‡πÄ‡∏û‡∏¥‡πà‡∏° HTML structure ‡πÉ‡∏ô main.html
- [ ] 2. ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS styles ‡πÉ‡∏ô main.html
- [ ] 3. ‡πÄ‡∏û‡∏¥‡πà‡∏° Show/Hide logic ‡πÉ‡∏ô initPromptCraft()
- [ ] 4. ‡πÄ‡∏û‡∏¥‡πà‡∏° getRedModePrompt(level) ‡πÉ‡∏ô prompt_craft.js
- [ ] 5. ‡∏õ‡∏£‡∏±‡∏ö generatePrompt() ‡∏£‡∏±‡∏ö intensityLevel
- [ ] 6. ‡πÄ‡∏û‡∏¥‡πà‡∏° intensity state management
- [ ] 7. ‡∏õ‡∏£‡∏±‡∏ö handleGenerate() ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ intensity
- [ ] 8. ‡πÄ‡∏û‡∏¥‡πà‡∏° event listeners ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö intensity selector
- [ ] 9. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å Test Cases
- [ ] 10. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó README.md / CHANGELOG

---

**‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢:** Claude Code
**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:** 2025-12-28
**‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô:** 1.0
